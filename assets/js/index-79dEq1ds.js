var Z=Object.defineProperty,ee=Object.defineProperties;var te=Object.getOwnPropertyDescriptors;var b=Object.getOwnPropertySymbols;var se=Object.prototype.hasOwnProperty,ne=Object.prototype.propertyIsEnumerable;var I=(s,e,t)=>e in s?Z(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,h=(s,e)=>{for(var t in e||(e={}))se.call(e,t)&&I(s,t,e[t]);if(b)for(var t of b(e))ne.call(e,t)&&I(s,t,e[t]);return s},T=(s,e)=>ee(s,te(e));var a=(s,e,t)=>I(s,typeof e!="symbol"?e+"":e,t);import{u as V,j as i,R as re,B as oe,a as ie,e as U,p as ce,C as ae,b as K,U as w,c as D,i as k,d as B,o as F,f as le,r as A,E as $,g as ue,h as ge,N as Y,k as he,H as de,A as me,l as pe,m as fe,n as _e,Q as ye,q as Ee}from"./.pnpm-CGst0pSM.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(n){if(n.ep)return;n.ep=!0;const o=t(n);fetch(n.href,o)}})();const G="/home",ve=["/403","/404","/500","/login","/dataScreen"],Ce=()=>{const s=V(),e=()=>{s(G)};return i.jsx(re,{status:"404",title:"404",className:"flex h-full flex-col items-center justify-center",subTitle:"Sorry, the page you visited does not exist.",extra:i.jsx(oe,{type:"primary",onClick:e,children:"Back Home"})})},Se=()=>i.jsx("div",{children:"Login"}),Oe=()=>i.jsx("div",{children:"Layout"}),Le=({animationDuration:s,progress:e})=>i.jsx("div",{style:{background:"#29d",height:2,left:0,marginLeft:`${(-1+e)*100}%`,position:"fixed",top:0,transition:`margin-left ${s}ms linear`,width:"100%",zIndex:1031},children:i.jsx("div",{style:{boxShadow:"0 0 10px #29d, 0 0 5px #29d",display:"block",height:"100%",opacity:1,position:"absolute",right:0,transform:"rotate(3deg) translate(0px, -4px)",width:100}})}),xe=({animationDuration:s,children:e,isFinished:t})=>i.jsx("div",{style:{opacity:t?0:1,pointerEvents:"none",transition:`opacity ${s}ms linear`},children:e}),Ie=({isAnimating:s})=>{const{animationDuration:e,isFinished:t,progress:r}=ie({isAnimating:s});return i.jsx(xe,{animationDuration:e,isFinished:t,children:i.jsx(Le,{animationDuration:e,progress:r})})},N="TOKEN__",H="USER__INFO__",M="API_ADDRESS__",C="LOCK__INFO__KEY__",_="COMMON__LOCAL__KEY__",y="COMMON__SESSION__KEY__",Te=0;class J{constructor(e=Te){a(this,"cache",{});a(this,"alive");this.alive=e*1e3}get getCache(){return this.cache}setCache(e){this.cache=e}get(e){return this.cache[e]}set(e,t,r){let n=this.get(e);if((!r||r<=0)&&(r=this.alive),n?(n.timeoutId&&(clearTimeout(n.timeoutId),n.timeoutId=void 0),n.value=t):(n={value:t,alive:r},this.cache[e]=n),!r)return t;const o=new Date().getTime();return n.time=r>o?r:o+r,n.timeoutId=setTimeout(()=>{this.remove(e)},r>o?r-o:r),t}remove(e){const t=this.get(e);if(Reflect.deleteProperty(this.cache,e),t)return clearTimeout(t.timeoutId),t.value}resetCache(e){Object.keys(e).forEach(t=>{const r=t,n=e[r];if(n&&n.time){const o=new Date().getTime(),c=n.time;c>o&&this.set(r,n.value,c)}})}clear(){Object.keys(this.cache).forEach(e=>{const t=this.cache[e];t.timeoutId&&clearTimeout(t.timeoutId)}),this.cache={}}}const we="0.0.0",Ae={version:we};function Ne(){const{VITE_GLOB_APP_TITLE:s}=Re();return`${s.replace(/\s/g,"_")}__${be()}`.toUpperCase()}function je(){return`${Ne()}${`__${Ae.version}`}__`.toUpperCase()}const Pe=s=>{function e(t){const r=[];for(let n=0;n<t.length;++n){const o=t.charCodeAt(n).toString(16);r.push(("000"+o).slice(-4))}return r.join("").toUpperCase()}return`__PRODUCTION__${e(s)||"__APP"}__CONF__`.toUpperCase().replace(/\s/g,"")};function Re(){const s=Pe("宗门管理系统"),e=window[s],{VITE_GLOB_APP_TITLE:t,VITE_GLOB_API_URL_PREFIX:r,VITE_GLOB_UPLOAD_URL:n}=e;let{VITE_GLOB_API_URL:o}=e;if(localStorage.getItem(M)){const c=JSON.parse(localStorage.getItem(M)||"{}");c!=null&&c.key&&(o=c==null?void 0:c.val)}return{VITE_GLOB_APP_TITLE:t,VITE_GLOB_API_URL:o,VITE_GLOB_API_URL_PREFIX:r,VITE_GLOB_UPLOAD_URL:n}}function be(){return"production"}const L=60*60*24*7,S={key:"_11111000001111@",iv:"@11111000001111_"},Ue=!0;class Ke{constructor({key:e,iv:t}){a(this,"key");a(this,"iv");this.key=U.parse(e),this.iv=U.parse(t)}get getOptions(){return{mode:ae,padding:ce,iv:this.iv}}encrypt(e){return K.encrypt(e,this.key,this.getOptions).toString()}decrypt(e){return K.decrypt(e,this.key,this.getOptions).toString(w)}}const d=class d{static getInstance(){return d.instance||(d.instance=new d),d.instance}encrypt(e){return w.parse(e).toString(D)}decrypt(e){return D.parse(e).toString(w)}};a(d,"instance");let j=d;class De{static createAesEncryption(e){return new Ke(e)}static createBase64Encryption(){return j.getInstance()}}const Q=({prefixKey:s="",storage:e=sessionStorage,key:t=S.key,iv:r=S.iv,timeout:n=null,hasEncrypt:o=!0}={})=>{if(o&&[t.length,r.length].some(P=>P!==16))throw new Error("When hasEncrypt is true, the key or iv must be 16 bits!");const c=De.createAesEncryption({key:S.key,iv:S.iv}),z=class{constructor(){a(this,"storage");a(this,"prefixKey");a(this,"encryption");a(this,"hasEncrypt");this.storage=e,this.prefixKey=s,this.encryption=c,this.hasEncrypt=o}getKey(g){return`${this.prefixKey}${g}`.toUpperCase()}set(g,v,f=n){const E=JSON.stringify({value:v,time:Date.now(),expire:k(f)?null:new Date().getTime()+f*1e3}),x=this.hasEncrypt?this.encryption.encrypt(E):E;this.storage.setItem(this.getKey(g),x)}get(g,v=null){const f=this.storage.getItem(this.getKey(g));if(!f)return v;try{const E=this.hasEncrypt?this.encryption.decrypt(f):f,x=JSON.parse(E),{value:X,expire:R}=x;if(k(R)||R>=new Date().getTime())return X;this.remove(g)}catch(E){return v}}remove(g){this.storage.removeItem(this.getKey(g))}clear(){this.storage.clear()}};return new z},W=(s,e={})=>h({hasEncrypt:Ue,storage:s,prefixKey:je()},e);Q(W(sessionStorage));const q=(s=sessionStorage,e={})=>Q(W(s,e)),ke=(s={})=>q(sessionStorage,T(h({},s),{timeout:L})),Be=(s={})=>q(localStorage,T(h({},s),{timeout:L})),l=new J(L),u=new J(L),m=Be(),p=ke();function Fe(){const s=m.get(_),e=p.get(y);s&&l.resetCache(s),e&&u.resetCache(e)}class O{static getLocal(e){var t;return(t=l.get(e))==null?void 0:t.value}static setLocal(e,t,r=!1){l.set(e,t),r&&m.set(_,l.getCache)}static removeLocal(e,t=!1){l.remove(e),t&&m.set(_,l.getCache)}static clearLocal(e=!1){l.clear(),e&&m.clear()}static getSession(e){var t;return(t=u.get(e))==null?void 0:t.value}static setSession(e,t,r=!1){u.set(e,t),r&&p.set(y,u.getCache)}static removeSession(e,t=!1){u.remove(e),t&&p.set(y,u.getCache)}static clearSession(e=!1){u.clear(),e&&p.clear()}static clearAll(e=!1){u.clear(),l.clear(),e&&(m.clear(),p.clear())}}window.addEventListener("beforeunload",function(){m.set(_,h(h({},F(l.getCache,C)),B(m.get(_),[N,H,C]))),p.set(y,h(h({},F(u.getCache,C)),B(p.get(y),[N,H,C])))});function He(s){const{key:e,newValue:t,oldValue:r}=s;if(!e){O.clearAll();return}t&&r&&(_===e&&O.clearLocal(),y===e&&O.clearSession())}window.addEventListener("storage",He);Fe();function Me(s){const e=O.getLocal;return e(s)}const Ve=({children:s})=>{const e=Me(N),t=le(),[r,n]=A.useState(!1),o=V();return A.useEffect(()=>{n(!0),e||ve.includes(t.pathname)?n(!1):(n(!1),o("/login"))},[t,e,o]),i.jsxs($,{FallbackComponent:()=>i.jsx(i.Fragment,{}),onReset:()=>{o("/login")},children:[i.jsx(Ie,{isAnimating:r}),s]})},$e={path:"/login",element:i.jsx($,{FallbackComponent:Ce,children:i.jsx(Se,{})})},Ye={path:"*",element:i.jsx(Y,{to:"/404",replace:!0})};function Ge(){const t=ue([$e,{path:"/",element:i.jsx(Oe,{}),children:[{index:!0,element:i.jsx(Y,{to:G,replace:!0})}]},Ye]);return i.jsx(ge,{router:t})}const Je="/react-demo/assets/svg/react-CHdo91hT.svg";function Qe(){return i.jsxs(he,{children:[i.jsxs(de,{children:[i.jsx("title",{children:"宗门管理系统"}),i.jsx("link",{rel:"icon",href:Je})]}),i.jsxs(A.Suspense,{children:[i.jsx(Ve,{children:Ge()}),i.jsx(me,{}),i.jsx(pe,{})]})]})}if(typeof window!="undefined"){let s=function(){var e=document.body,t=document.getElementById("__svg__icons__dom__");t||(t=document.createElementNS("http://www.w3.org/2000/svg","svg"),t.style.position="absolute",t.style.width="0",t.style.height="0",t.id="__svg__icons__dom__",t.setAttribute("xmlns","http://www.w3.org/2000/svg"),t.setAttribute("xmlns:link","http://www.w3.org/1999/xlink")),t.innerHTML="",e.insertBefore(t,e.lastChild)};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",s):s()}fe(document.getElementById("root")).render(i.jsx(_e,{children:i.jsx(ye,{client:new Ee,children:i.jsx(Qe,{})})}));
